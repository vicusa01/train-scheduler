@using TrainScheduler.Core.Helpers  
@{ 
    var hasBooking = Context.Session.TryGet<List<int>>(TrainScheduler.App.Constants.CacheConstants.BookedSchedules, out var bookedSchedules);
    var bookedSchedulesCount = hasBooking ? bookedSchedules.Count : default;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Train Scheduler</title>

    <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          rel="stylesheet">
    <link rel="stylesheet" href="~/css/site.css" />

    <script crossorigin="anonymous" integrity="sha384-xBuQ/xzmlsLoJpyjoggmTEz8OWUFM0/RC5BsqQBDX2v5cMvDHcMakNTNrHIW2I5f" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script crossorigin="anonymous" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script crossorigin="anonymous" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.css">
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap-datetimepicker.min.css" type="text/css" media="all" />
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js"></script>
    <script type="text/javascript" src="~/lib/bootstrap/dist/js/bootstrap-datetimepicker.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <link rel="stylesheet" href="~/css/style.css">
    <link rel="stylesheet" href="~/css/register.css">
    <link rel="stylesheet" href="~/css/tables.css">
	<script src="~/js/swiper.js"></script>
    <script src="~/js/login.js"></script>
	<script defer src="~/js/script.js"></script>
</head>
<body>
    <header class="header">
        <nav class="header-__menu menu">
            <div class="header__container">
                <a class="header__logo" asp-area="" asp-controller="Home" asp-action="Index">
                    <svg width="300" height="47" viewBox="0 0 300 47" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="32" height="31" fill="#1AA090" />
                        <path d="M14.5511 13.9435V9.63636H37.1811V13.9435H28.4144V38H23.3178V13.9435H14.5511ZM39.1131 38V16.7273H43.9743V20.2727H44.1958C44.5836 19.0447 45.2484 18.0984 46.1902 17.4336C47.1412 16.7596 48.226 16.4226 49.4448 16.4226C49.7218 16.4226 50.0311 16.4364 50.3727 16.4641C50.7235 16.4826 51.0144 16.5149 51.2452 16.5611V21.1729C51.0328 21.0991 50.6958 21.0344 50.2342 20.979C49.7818 20.9144 49.3432 20.8821 48.9185 20.8821C48.0044 20.8821 47.1827 21.0806 46.4533 21.4776C45.7331 21.8654 45.1653 22.4055 44.7498 23.098C44.3343 23.7905 44.1266 24.5891 44.1266 25.494V38H39.1131ZM60.3166 38.4293C58.9686 38.4293 57.7544 38.1893 56.6742 37.7092C55.6032 37.2198 54.7537 36.4996 54.1259 35.5487C53.5073 34.5977 53.198 33.4251 53.198 32.0309C53.198 30.8306 53.4196 29.8381 53.8627 29.0533C54.3059 28.2685 54.9107 27.6406 55.677 27.1697C56.4434 26.6989 57.3066 26.3434 58.2669 26.1033C59.2363 25.854 60.2381 25.674 61.2722 25.5632C62.5186 25.4339 63.5297 25.3185 64.3052 25.217C65.0808 25.1062 65.644 24.94 65.9949 24.7184C66.3549 24.4876 66.535 24.1321 66.535 23.652V23.5689C66.535 22.5256 66.2257 21.7177 65.6071 21.1452C64.9885 20.5728 64.0975 20.2866 62.9341 20.2866C61.7061 20.2866 60.7321 20.5543 60.0119 21.0898C59.301 21.6254 58.8208 22.2578 58.5716 22.9872L53.8904 22.3224C54.2598 21.0298 54.8691 19.9496 55.7186 19.0817C56.568 18.2045 57.6067 17.549 58.8347 17.1151C60.0627 16.6719 61.4199 16.4503 62.9064 16.4503C63.9313 16.4503 64.9515 16.5703 65.9672 16.8104C66.9828 17.0504 67.9107 17.4474 68.7509 18.0014C69.5911 18.5462 70.2651 19.2894 70.7729 20.2312C71.29 21.1729 71.5485 22.3501 71.5485 23.7628V38H66.7289V35.0778H66.5627C66.258 35.6687 65.8287 36.2227 65.2747 36.7397C64.7299 37.2475 64.0421 37.6584 63.2111 37.9723C62.3894 38.277 61.4245 38.4293 60.3166 38.4293ZM61.6184 34.7454C62.6248 34.7454 63.4973 34.5469 64.236 34.1499C64.9746 33.7436 65.5424 33.2081 65.9395 32.5433C66.3457 31.8786 66.5488 31.1538 66.5488 30.369V27.8622C66.3919 27.9915 66.1241 28.1115 65.7456 28.2223C65.3762 28.3331 64.9608 28.43 64.4991 28.5131C64.0375 28.5962 63.5804 28.6701 63.128 28.7347C62.6756 28.7994 62.2832 28.8548 61.9508 28.9009C61.2029 29.0025 60.5336 29.1687 59.9426 29.3995C59.3517 29.6303 58.8855 29.9535 58.5439 30.369C58.2022 30.7752 58.0314 31.3015 58.0314 31.9478C58.0314 32.8711 58.3684 33.5682 59.0424 34.0391C59.7164 34.5099 60.5751 34.7454 61.6184 34.7454ZM76.5897 38V16.7273H81.6032V38H76.5897ZM79.1103 13.7081C78.3162 13.7081 77.633 13.445 77.0605 12.9187C76.4881 12.3832 76.2019 11.7415 76.2019 10.9936C76.2019 10.2365 76.4881 9.59481 77.0605 9.06854C77.633 8.53302 78.3162 8.26527 79.1103 8.26527C79.9135 8.26527 80.5968 8.53302 81.16 9.06854C81.7324 9.59481 82.0186 10.2365 82.0186 10.9936C82.0186 11.7415 81.7324 12.3832 81.16 12.9187C80.5968 13.445 79.9135 13.7081 79.1103 13.7081ZM91.7721 25.5355V38H86.7586V16.7273H91.5505V20.342H91.7998C92.2892 19.1509 93.0693 18.2045 94.1404 17.5028C95.2206 16.8011 96.5548 16.4503 98.1428 16.4503C99.6109 16.4503 100.89 16.7642 101.979 17.392C103.078 18.0199 103.927 18.9293 104.527 20.1204C105.137 21.3114 105.437 22.7564 105.428 24.4553V38H100.414V25.2308C100.414 23.8089 100.045 22.6964 99.3062 21.8931C98.5768 21.0898 97.5658 20.6882 96.2732 20.6882C95.396 20.6882 94.6159 20.8821 93.9326 21.2699C93.2586 21.6484 92.7277 22.1978 92.3399 22.918C91.9614 23.6381 91.7721 24.5107 91.7721 25.5355ZM126.16 17.4336C126.031 16.2241 125.486 15.2823 124.526 14.6083C123.575 13.9343 122.338 13.5973 120.814 13.5973C119.743 13.5973 118.825 13.7589 118.058 14.082C117.292 14.4052 116.706 14.8437 116.299 15.3977C115.893 15.9517 115.685 16.5842 115.676 17.2951C115.676 17.886 115.81 18.3984 116.078 18.8324C116.355 19.2663 116.729 19.6357 117.2 19.9403C117.671 20.2358 118.192 20.4851 118.765 20.6882C119.337 20.8913 119.914 21.0621 120.496 21.2006L123.155 21.8654C124.226 22.1147 125.255 22.4517 126.243 22.8764C127.241 23.3011 128.131 23.8366 128.916 24.483C129.71 25.1293 130.338 25.9094 130.8 26.8235C131.261 27.7376 131.492 28.8086 131.492 30.0366C131.492 31.6985 131.068 33.1619 130.218 34.4268C129.369 35.6825 128.141 36.6658 126.534 37.3768C124.937 38.0785 123.003 38.4293 120.731 38.4293C118.525 38.4293 116.609 38.0877 114.984 37.4045C113.368 36.7212 112.103 35.7241 111.189 34.413C110.284 33.1019 109.795 31.5046 109.721 29.6211H114.776C114.85 30.609 115.155 31.4308 115.69 32.0863C116.226 32.7418 116.923 33.2312 117.781 33.5543C118.649 33.8775 119.619 34.0391 120.69 34.0391C121.807 34.0391 122.786 33.8729 123.626 33.5405C124.475 33.1989 125.14 32.728 125.62 32.1278C126.1 31.5185 126.345 30.8075 126.354 29.995C126.345 29.2564 126.128 28.647 125.703 28.1669C125.278 27.6776 124.683 27.2713 123.917 26.9482C123.16 26.6158 122.273 26.3203 121.258 26.0618L118.031 25.2308C115.695 24.6307 113.848 23.7212 112.491 22.5025C111.143 21.2745 110.469 19.6449 110.469 17.6136C110.469 15.9425 110.921 14.479 111.826 13.2234C112.74 11.9677 113.982 10.9936 115.552 10.3011C117.121 9.59943 118.899 9.24858 120.884 9.24858C122.896 9.24858 124.66 9.59943 126.174 10.3011C127.698 10.9936 128.893 11.9585 129.761 13.1957C130.629 14.4236 131.077 15.8363 131.104 17.4336H126.16ZM145.131 38.4155C143.007 38.4155 141.183 37.9492 139.66 37.0167C138.146 36.0842 136.978 34.7962 136.156 33.1527C135.344 31.5 134.937 29.598 134.937 27.4467C134.937 25.2862 135.353 23.3796 136.184 21.7269C137.015 20.065 138.187 18.7724 139.702 17.8491C141.225 16.9165 143.025 16.4503 145.103 16.4503C146.829 16.4503 148.357 16.7688 149.687 17.4059C151.026 18.0337 152.092 18.9247 152.886 20.0788C153.68 21.2237 154.133 22.5625 154.243 24.0952H149.452C149.258 23.0703 148.796 22.2163 148.067 21.533C147.346 20.8406 146.382 20.4943 145.172 20.4943C144.147 20.4943 143.247 20.7713 142.471 21.3253C141.696 21.87 141.091 22.6548 140.657 23.6797C140.232 24.7045 140.02 25.9325 140.02 27.3636C140.02 28.8132 140.232 30.0597 140.657 31.103C141.082 32.1371 141.677 32.9357 142.444 33.4989C143.219 34.0529 144.129 34.3299 145.172 34.3299C145.911 34.3299 146.571 34.1914 147.153 33.9144C147.743 33.6282 148.237 33.2173 148.634 32.6818C149.031 32.1463 149.304 31.4954 149.452 30.729H154.243C154.123 32.234 153.68 33.5682 152.914 34.7315C152.148 35.8857 151.104 36.7905 149.784 37.446C148.464 38.0923 146.912 38.4155 145.131 38.4155ZM163.374 25.5355V38H158.36V9.63636H163.263V20.342H163.512C164.011 19.1417 164.782 18.1953 165.825 17.5028C166.878 16.8011 168.216 16.4503 169.841 16.4503C171.319 16.4503 172.607 16.7596 173.705 17.3782C174.804 17.9968 175.653 18.9016 176.254 20.0927C176.863 21.2837 177.168 22.7379 177.168 24.4553V38H172.154V25.2308C172.154 23.7997 171.785 22.6871 171.046 21.8931C170.317 21.0898 169.292 20.6882 167.972 20.6882C167.085 20.6882 166.291 20.8821 165.59 21.2699C164.897 21.6484 164.352 22.1978 163.955 22.918C163.568 23.6381 163.374 24.5107 163.374 25.5355ZM191.696 38.4155C189.563 38.4155 187.721 37.9723 186.17 37.0859C184.628 36.1903 183.441 34.9254 182.611 33.2912C181.78 31.6477 181.364 29.7134 181.364 27.4883C181.364 25.3001 181.78 23.3796 182.611 21.7269C183.451 20.065 184.623 18.7724 186.128 17.8491C187.633 16.9165 189.401 16.4503 191.433 16.4503C192.744 16.4503 193.981 16.6626 195.144 17.0874C196.317 17.5028 197.351 18.1491 198.247 19.0263C199.151 19.9034 199.862 21.0206 200.379 22.3778C200.896 23.7259 201.155 25.3324 201.155 27.1974V28.7347H183.718V25.3555H196.349C196.34 24.3952 196.132 23.5412 195.726 22.7933C195.32 22.0362 194.752 21.4407 194.022 21.0067C193.302 20.5728 192.462 20.3558 191.502 20.3558C190.477 20.3558 189.577 20.6051 188.801 21.1037C188.026 21.593 187.421 22.2393 186.987 23.0426C186.562 23.8366 186.345 24.7092 186.336 25.6602V28.6101C186.336 29.8473 186.562 30.9091 187.015 31.7955C187.467 32.6726 188.1 33.3466 188.912 33.8175C189.725 34.2791 190.676 34.5099 191.765 34.5099C192.494 34.5099 193.155 34.4084 193.745 34.2053C194.336 33.9929 194.849 33.6836 195.283 33.2773C195.717 32.8711 196.044 32.3679 196.266 31.7678L200.947 32.294C200.652 33.5312 200.089 34.6115 199.258 35.5348C198.436 36.4489 197.383 37.1598 196.1 37.6676C194.816 38.1662 193.348 38.4155 191.696 38.4155ZM213.29 38.3739C211.619 38.3739 210.124 37.9446 208.803 37.0859C207.483 36.2273 206.44 34.9808 205.673 33.3466C204.907 31.7124 204.524 29.7273 204.524 27.3913C204.524 25.0277 204.912 23.0334 205.687 21.4084C206.472 19.7741 207.529 18.5415 208.859 17.7106C210.188 16.8704 211.67 16.4503 213.304 16.4503C214.551 16.4503 215.576 16.6626 216.379 17.0874C217.182 17.5028 217.819 18.006 218.29 18.5969C218.761 19.1786 219.126 19.728 219.384 20.245H219.592V9.63636H224.619V38H219.689V34.6484H219.384C219.126 35.1655 218.752 35.7148 218.262 36.2965C217.773 36.869 217.127 37.3583 216.324 37.7646C215.52 38.1708 214.509 38.3739 213.29 38.3739ZM214.689 34.2607C215.751 34.2607 216.656 33.9744 217.404 33.402C218.152 32.8203 218.719 32.0124 219.107 30.9783C219.495 29.9442 219.689 28.7393 219.689 27.3636C219.689 25.9879 219.495 24.7923 219.107 23.7766C218.729 22.761 218.165 21.9716 217.418 21.4084C216.679 20.8452 215.77 20.5636 214.689 20.5636C213.572 20.5636 212.64 20.8544 211.892 21.4361C211.144 22.0178 210.581 22.821 210.202 23.8459C209.824 24.8707 209.634 26.0433 209.634 27.3636C209.634 28.6932 209.824 29.8796 210.202 30.9229C210.59 31.957 211.158 32.7741 211.906 33.3743C212.663 33.9652 213.591 34.2607 214.689 34.2607ZM243.52 29.0533V16.7273H248.534V38H243.673V34.2191H243.451C242.971 35.4102 242.182 36.3842 241.083 37.1413C239.993 37.8984 238.65 38.277 237.053 38.277C235.658 38.277 234.426 37.9677 233.355 37.3491C232.293 36.7212 231.462 35.8118 230.862 34.6207C230.262 33.4205 229.962 31.9709 229.962 30.272V16.7273H234.975V29.4964C234.975 30.8445 235.345 31.9155 236.083 32.7095C236.822 33.5036 237.791 33.9006 238.992 33.9006C239.73 33.9006 240.446 33.7205 241.138 33.3604C241.831 33.0004 242.399 32.4648 242.842 31.7539C243.294 31.0337 243.52 30.1335 243.52 29.0533ZM258.703 9.63636V38H253.689V9.63636H258.703ZM273.276 38.4155C271.143 38.4155 269.301 37.9723 267.75 37.0859C266.208 36.1903 265.022 34.9254 264.191 33.2912C263.36 31.6477 262.944 29.7134 262.944 27.4883C262.944 25.3001 263.36 23.3796 264.191 21.7269C265.031 20.065 266.203 18.7724 267.708 17.8491C269.213 16.9165 270.981 16.4503 273.013 16.4503C274.324 16.4503 275.561 16.6626 276.724 17.0874C277.897 17.5028 278.931 18.1491 279.827 19.0263C280.731 19.9034 281.442 21.0206 281.959 22.3778C282.476 23.7259 282.735 25.3324 282.735 27.1974V28.7347H265.299V25.3555H277.929C277.92 24.3952 277.712 23.5412 277.306 22.7933C276.9 22.0362 276.332 21.4407 275.603 21.0067C274.882 20.5728 274.042 20.3558 273.082 20.3558C272.057 20.3558 271.157 20.6051 270.381 21.1037C269.606 21.593 269.001 22.2393 268.567 23.0426C268.142 23.8366 267.925 24.7092 267.916 25.6602V28.6101C267.916 29.8473 268.142 30.9091 268.595 31.7955C269.047 32.6726 269.68 33.3466 270.492 33.8175C271.305 34.2791 272.256 34.5099 273.345 34.5099C274.074 34.5099 274.735 34.4084 275.326 34.2053C275.916 33.9929 276.429 33.6836 276.863 33.2773C277.297 32.8711 277.625 32.3679 277.846 31.7678L282.527 32.294C282.232 33.5312 281.669 34.6115 280.838 35.5348C280.016 36.4489 278.963 37.1598 277.68 37.6676C276.397 38.1662 274.929 38.4155 273.276 38.4155ZM286.976 38V16.7273H291.838V20.2727H292.059C292.447 19.0447 293.112 18.0984 294.053 17.4336C295.004 16.7596 296.089 16.4226 297.308 16.4226C297.585 16.4226 297.894 16.4364 298.236 16.4641C298.587 16.4826 298.878 16.5149 299.108 16.5611V21.1729C298.896 21.0991 298.559 21.0344 298.097 20.979C297.645 20.9144 297.206 20.8821 296.782 20.8821C295.868 20.8821 295.046 21.0806 294.317 21.4776C293.596 21.8654 293.029 22.4055 292.613 23.098C292.198 23.7905 291.99 24.5891 291.99 25.494V38H286.976Z" fill="white" />
                    </svg>

                </a>
    
                <div class="header__navigation">

                    <ul class="menu__body" style="margin-bottom: 0px;">
                        <li class="nav-item">
                            <a class="menu__link" asp-area="" asp-controller="Home" asp-action="Index">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="menu__link" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
                        </li>

                        @if (User.Identity.IsAuthenticated)
                        {
                            <li class="nav-item">
                                <a class="menu__link" asp-controller="Ticket" asp-action="UserTickets">Tickets</a>
                            </li>
                        }

                        @if (User.IsInRole("Admin"))
                        {
                            <li class="nav-item" style="width: 155px">
                                <a class="menu__link" style="color: #28a745 !important" asp-controller="Admin" asp-action="Index">Admin Panel</a>
                            </li>
                        }

                        @if (!User.Identity.IsAuthenticated)
                        {
                            <li class="nav-item">
                                <a class="login header__btn" asp-controller="Account" asp-action="Login">Log In</a>
                            </li>
                            <li class="nav-item">
                                <a class="register header__btn" asp-controller="Account" asp-action="Register">Sign Up</a>
                            </li>
                        }
                    </ul>

                    @if (User.Identity.IsAuthenticated)
                    {
                        <div style="width: 165px">
                            <a asp-controller="Ticket" asp-action="IssueTickets" style="position:relative;">
                                <i class="fa fa-shopping-cart" aria-hidden="true" style="font-size: 45px;position:relative; top: 3px; color:white"></i>
                                <span style="display: inline;
                                  padding-left: 13px;
                                  font-size: 31px;
font-weight:700;
                                  color: white;"
                                  }>Cart: </span>
                                <span style="display: inline;
                                  font-size: 31px;
font-weight:700;
                                  color: white;" id="basket">@bookedSchedulesCount</span>
                            </a>
                        </div>
                        <span style="font-size: 26px;
    border-bottom: solid white 2px;
    padding-bottom: 8px;
}">@User.Identity.Name</span>
                        <form class="form-inline my-2 my-lg-0" method="post" asp-controller="Account" asp-action="Logout">
                            
                            <input class="register header__btn" type="submit" value="Logout" />
                        </form>

                    }
                </div>
            </div>
        </nav>
    </header>
        <main role="main" class="page">
            @RenderBody()
        </main>
    <footer class="footer">
        
            &copy; 2022 - Train Scheduler - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
       
    </footer>

    @await RenderSectionAsync("Scripts", required: false)

</body>
</html>